(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(10),c=a.n(r),o=(a(16),a(5)),s=a(6),m=a(8),l=a(7),d=a(1),u=a(2),f=a(4),p=a(3),h=a.n(p),_=function(e){var t=e.id,a=e.name,r=e.image,c=e.ingredients,o=e.createdAt,s=e.onDelete,m=e.onEdit,l=e.story,p=Object(n.useState)(!1),_=Object(f.a)(p,2),g=_[0],E=_[1],v=Object(n.useState)(!1),b=Object(f.a)(v,2),N=b[0],w=b[1],y=Object(n.useState)({}),C=Object(f.a)(y,2),j=C[0],O=C[1],k=Object(n.useState)(!1),D=Object(f.a)(k,2),S=(D[0],D[1],{name:a,ingredients:c,image:r}),Y=function(e){var t=e.target,a=t.name,n=t.value;console.log("value: ",n),console.log("form: ",j),console.log("updatedForm: ",S),O(Object(u.a)(Object(u.a)({},S),{},Object(d.a)({},a,n)))},I=c.split(",");return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"recipe-info"},i.a.createElement("div",{className:"recipe-info__image-container"},i.a.createElement("img",{className:"recipe-info__image-container_image",src:""===r?"https://wallpaperaccess.com/full/271679.jpg":r,alt:"food"})),i.a.createElement("div",{className:"recipe-info__description"},i.a.createElement("h4",{className:"recipe-info__description_title"},"Ingredients"),i.a.createElement("div",{className:"recipe-info__description_ingredients"},I.map((function(e){return i.a.createElement("li",{key:e},e)}))),i.a.createElement("div",{className:"recipe-info__description_date-btns"},i.a.createElement("div",{className:"recipe-info__description_date"},l.length<=1?"Created: ".concat(h()(o).format("D-MM-YYYY, H:mm")):"Updated: ".concat(h()(o).format("D-MM-YYYY, H:mm"))),i.a.createElement("div",{className:"recipe-info__description__btns"},i.a.createElement("button",{className:g?"recipe-info__description__btns_edit active":"recipe-info__description__btns_edit",onClick:function(){return E(!g)}},"Edit"),i.a.createElement("button",{className:"recipe-info__description__btns_delete",onClick:function(){return s(t)}},"Delete"),i.a.createElement("button",{className:N?"recipe-info__description__btns_story active":"recipe-info__description__btns_story",onClick:function(){return w(!N)}},N?"Hide story":"Show story"))))),g&&i.a.createElement("div",{className:"edit-form"},i.a.createElement("form",{onSubmit:function(e){return function(e,t){e.preventDefault(),m(j,t),E(!g)}(e,t)}},i.a.createElement("div",{className:"edit-form__item"},i.a.createElement("div",{className:"edit-form__text"},"Name"),i.a.createElement("input",{name:"name",defaultValue:a,onChange:function(e){return Y(e)},placeholder:"Write the name of your dish",className:"edit-form__input"})),i.a.createElement("div",{className:"edit-form__item"},i.a.createElement("div",{className:"edit-form__text"},"Ingredients ( put commas to get a list :) )"),i.a.createElement("input",{name:"ingredients",defaultValue:c,onChange:function(e){return Y(e)},placeholder:"Write some ingredients",className:"edit-form__input"})),i.a.createElement("div",{className:"edit-form__item"},i.a.createElement("div",{className:"edit-form__text"},"Image"),i.a.createElement("input",{name:"image",defaultValue:r,onChange:function(e){return Y(e)},placeholder:"Enter image URL of your dish (or our standard picture will be here)",className:"edit-form__input"})),i.a.createElement("button",{className:"waves-effect waves-light btn edit-btn"},"Save changes"))),N&&i.a.createElement("div",{className:"story-container"},l.map((function(e){return i.a.createElement("div",{className:"story-card"},i.a.createElement("div",{className:"story-card__item"},"Name: ",e.name),i.a.createElement("div",{className:"story-card__item"},"Ingredients: ",e.ingredients),i.a.createElement("div",{className:"story-card__item"},"Image: ",e.image),i.a.createElement("div",{className:"story-card__date"},void 0===e.updated?"Created ".concat(e.createdAt):"Updated ".concat(e.updated)))}))))},g={name:"Dish without title (edit and add title)",ingredients:"Dish without ingredients, (edit and add some ingredients)",image:"https://wallpaperaccess.com/full/271679.jpg"},E=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createEventObj=function(e){e.preventDefault(),Object.values(n.state.form).some((function(e){return""===e}))?console.log("no values"):(n.props.onCreate(n.state.form),n.clearForm(),n.hidePopup())},n.hidePopup=function(){n.props.showCreate()},n.inputHandler=function(e){var t=e.target,a=t.name,i=t.value;n.setState({form:Object(u.a)(Object(u.a)({},n.state.form),{},Object(d.a)({},a,i))})},n.clearForm=function(){n.setState({form:g})},n.state={form:g},n}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"recipe-modal"},i.a.createElement("div",{className:"recipe-modal__content"},i.a.createElement("div",{className:"create-event"},i.a.createElement("form",{className:"event-form"},i.a.createElement("div",{className:"event-form__container"},i.a.createElement("div",{className:"event-form__item"},"Name"," ",i.a.createElement("input",{onChange:this.inputHandler,type:"text",className:"event-form__item_input",name:"name",placeholder:"Wtite the name of your dish"})),i.a.createElement("div",{className:"event-form__item"},"Ingredients ( put commas to get a list :) )",i.a.createElement("input",{onChange:this.inputHandler,name:"ingredients",placeholder:"Write some ingredients",className:"event-form__item_input",type:"text"})),i.a.createElement("div",{className:"event-form__item"},"Image",i.a.createElement("input",{onChange:this.inputHandler,type:"text",name:"image",className:"event-form__item_input",placeholder:"Enter image URL of your dish (or our standard picture will be here)"})))),i.a.createElement("button",{type:"submit",className:"waves-effect waves-light btn",onClick:this.createEventObj},"Save"))))}}]),a}(n.Component),v="https://5e97f8bc77f5430016339cb5.mockapi.io/api/v1/recipes",b=function(e,t){return console.log(t),fetch("".concat(v,"/").concat(e),{method:"PUT",headers:{"Content-type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Failed to change status of recipe")}))},N=function(e){Object(m.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).fetchRecipes=function(){fetch(v).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).then((function(e){n.setState({recipes:e})}))},n.showCreate=function(){n.setState({showCreate:!n.state.showCreate})},n.showInfo=function(e){var t={showInfo:!e.showInfo};b(e.id,t).then((function(){return n.fetchRecipes()}))},n.onCreate=function(e){var t,a={name:e.name,ingredients:e.ingredients,image:e.image,createdAt:new Date,story:[],showInfo:!1};a.story.push({name:a.name,ingredients:a.ingredients,image:a.image,createdAt:h()(a.createdAt).format("D-MM-YYYY, H:mm")}),(t=a,fetch(v,{method:"POST",headers:{"Content-type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Failed to create recipe")}))).then((function(){return n.fetchRecipes()}))},n.handleRecipeDelete=function(e){var t;(t=e,fetch("".concat(v,"/").concat(t),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Failed to delete recipe")}))).then((function(){return n.fetchRecipes()}))},n.onEdit=function(e,t){var a=n.state.recipes.find((function(e){return e.id===t}));a.createdAt=new Date,a.name=e.name,a.ingredients=e.ingredients,a.image=e.image,a.story.push({updated:h()(a.createdAt).format("D-MM-YYYY, H:mm"),name:e.name,ingredients:e.ingredients,image:e.image}),b(t,a).then((function(){return n.fetchRecipes()}))},n.state={recipes:[],showCreate:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.fetchRecipes()}},{key:"render",value:function(){var e=this,t=this.state.recipes.slice().sort((function(e,t){return e.createdAt-t.createdAt}));return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"todo-list"},i.a.createElement("button",{className:"waves-effect waves-light create-btn",onClick:this.showCreate},"Create recipe"),this.state.showCreate&&i.a.createElement(E,{onCreate:this.onCreate,showCreate:this.showCreate}),i.a.createElement("ul",{className:"list"},t.map((function(t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"card-background"},i.a.createElement("li",{key:t.id,className:"list-item",onClick:function(){return e.showInfo(t)}},i.a.createElement("span",{className:"list-item__text"},t.name)),t.showInfo&&i.a.createElement(_,Object.assign({key:t.id},t,{recipe:t,onDelete:e.handleRecipeDelete,onEdit:e.onEdit}))))})))))}}]),a}(n.Component),w=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{className:"title"},"CookBook"),i.a.createElement(N,null))},y=function(){return i.a.createElement(w,null)};c.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(y,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.7a26a69a.chunk.js.map